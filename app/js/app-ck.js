var gridster,puzzleComplete=!1;$(document).ready(function(){function r(e){var t=[],n=e.length,r;while(n){r=Math.floor(Math.random()*n--);t.push(e.splice(r,1)[0])}return t}function u(e){if(puzzleComplete){console.log("complete");m();f<3?console.log("great job!, you completed it in under 3 minutes!"):f>=3&&console.log("You just misted it!")}else{for(var n=0;n<e.length;n++){console.log(t[n].id);$($(".gridster li").get(n)).removeClass("js--correct");if(JSON.stringify(e[n])===JSON.stringify(t[n])){console.log("match!");$($(".gridster li").get(n)).addClass("js--correct")}else console.log("not match!")}console.log("incomplete")}}puzzleContainerWidth=$(".right").width();newSize=Math.floor(puzzleContainerWidth/9);gridster=$(".gridster ul").gridster({widget_margins:[0,0],widget_base_dimensions:[newSize,newSize],extra_rows:0,extra_cols:0,max_cols:4,max_rows:5,autogenerate_stylesheet:!0,avoid_overlapped_widgets:!0,shift_larger_widgets_down:!0,serialize_params:function(e,t){return{id:e.attr("id"),col:t.col,row:t.row,size_x:t.size_x,size_y:t.size_y}},draggable:{stop:function(e,t){var n=gridster.serialize();u(n)},start:function(){$(".gridster ul").css({height:newSize*5})}}}).data("gridster");var e=20,t=gridster.serialize(),n=gridster.serialize(),i=r(n);gridster.remove_all_widgets();$.each(i,function(e){gridster.add_widget('<li style="background-position: '+(t[e].col-1)*-newSize+"px "+(t[e].row-1)*-newSize+'px;">',this.size_x,this.size_y,this.col,this.row)});$(".gridster li").each(function(t){$(this).attr("id",t-e+1)});var s=[newSize*4+"px",newSize*5+"px"],o=s.join(" ");$(".gridster li").css({"background-size":o});$(".gridster").css({width:newSize*4});var a=0,f=0,l,c=function(){var e=function(){if(a===60){if(f===3){clearInterval(e);return}f++;a=0}a<9?l="0":l="";a++;$(".time-bar").removeClass("js--hide");console.log(a);$(".js--time").text(""+f+":"+l+""+a)},t=setInterval(e,1e3)};console.log("ready");var h=!1,p=$(".js--btn");p.on("click",function(e){e.preventDefault();v();d()});var d=function(){$(".overlay-screen").fadeOut(function(){$(this).removeClass("js--show")})},v=function(){console.log("starting!");c()},m=function(){$(".js--game-over").fadeIn(function(){$(this).removeClass("js--hide");$(this).addClass("js--show")})}});